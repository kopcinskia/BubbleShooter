var BubbleShoot=window.BubbleShoot||{}
BubbleShoot.ui=(function($){var ui={BUBBLE_DIMS:44,ROW_HEIGHT:38,init:function(){},hideDialog:function(){$(".dialog").slideUp(500)},getMouseCoords:function(e){let coords={x:e.pageX,y:e.pageY}
return coords},getBubbleCoords:function(bubble){let bubbleCoords=bubble.position()
bubbleCoords.left+=ui.BUBBLE_DIMS/2
bubbleCoords.top+=ui.BUBBLE_DIMS/2
return bubbleCoords},getBubbleAngle:function(bubble,e){let mouseCoords=ui.getMouseCoords(e),bubbleCoords=ui.getBubbleCoords(bubble),gameCoords=$("#game").position(),boardLeft=148,browserWidth=window.innerWidth
document.body.clientWidth
let page=document.getElementById("page"),style=window.getComputedStyle(page),styleString=style.marginLeft
if(browserWidth>3022){var varMatginLeft=styleString.slice(0,4)}else if(browserWidth>1127){var varMatginLeft=styleString.slice(0,3)}else if(browserWidth>1037){var varMatginLeft=styleString.slice(0,2)}else{var varMatginLeft=styleString.slice(0,1)}var intMarginLeft=parseInt(varMatginLeft,10)
var angle=Math.atan((mouseCoords.x-bubbleCoords.left-boardLeft-intMarginLeft)/(bubbleCoords.top+gameCoords.top-mouseCoords.y));if(mouseCoords.y>bubbleCoords.top+gameCoords.top){angle+=Math.PI;}return angle;},fireBubble:function(bubble,coords,duration){bubble.setState(BubbleShoot.BubbleState.FIRING)
var complete=function(){if(typeof(bubble.getRow())!='undefined'){bubble.getSprite().css(Modernizr.prefixed("transition"),"")
bubble.getSprite().css({left:bubble.getCoords().left-ui.BUBBLE_DIMS/2,top:bubble.getCoords().top-ui.BUBBLE_DIMS/2})
bubble.setState(BubbleShoot.BubbleState.ON_BOARD)}else{bubble.setState(BubbleShoot.BubbleState.FIRED)}}
if(Modernizr.csstransitions&&!BubbleShoot.Renderer){bubble.getSprite().css(Modernizr.prefixed("transition"),"all "+(duration/1000)+"s linear")
bubble.getSprite().css({left:coords.x-ui.BUBBLE_DIMS/2,top:coords.y-ui.BUBBLE_DIMS/2})
setTimeout(complete,duration)}else{bubble.getSprite().animate({left:coords.x-ui.BUBBLE_DIMS/2,top:coords.y-ui.BUBBLE_DIMS/2},{duration:duration,easing:"linear",complete:complete})}},drawBoard:function(board){let rows=board.getRows(),gameArea=$("#board")
for(let i=0;i<rows.length;i++){let row=rows[i]
for(let j=0;j<row.length;j++){let bubble=row[j]
if(bubble){let sprite=bubble.getSprite()
gameArea.append(sprite)
let left=j*ui.BUBBLE_DIMS/2,top=i*ui.ROW_HEIGHT
sprite.css({left:left,top:top})}}}},drawBubblesRemaining:function(numBubbles){$("#bubbles_remaining").text('You Have : '+numBubbles+'bubbles')},drawScore:function(score){$("#score").text(score)},drawHighScore:function(highScore){$("#high_score").text(highScore)},drawLevel:function(level){$("#level").text(level+1)},endGame:function(hasWon,score){$("#game").unbind("click")
$("#game").unbind("mousemove")
BubbleShoot.ui.drawBubblesRemaining(0)
if(hasWon){$(".level_complete").show()
$(".level_failed").hide()}else{$(".level_complete").hide()
$(".level_failed").show()}$("#end_game").slideDown(500)
$("#final_score_value").text(score)}}
return ui})(jQuery)